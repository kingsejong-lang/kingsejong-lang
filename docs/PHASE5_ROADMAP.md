# Phase 5 로드맵: 개발자 경험 & 생태계 구축

> **기간**: 2025 Q1-Q2 (6개월)
> **시작일**: 2025-11-11
> **목표**: 개발자 도구, 생태계 구축, 언어 기능 강화
> **우선순위 재조정**: 2025-11-11 (개발자 경험 우선)

---

## 📊 Phase 5 개요

Phase 1-4에서 언어의 기반을 완성했습니다. Phase 5에서는 **개발자 경험**과 **생태계 구축**에 집중합니다.

### 현재 상태
- ✅ Phase 1-4 완료 (100%)
- ✅ 567개 테스트 통과 (100%)
- ✅ v0.2.0 릴리스 완료
- ✅ JIT 연구 완료 (HotPathDetector)

### ⚠️ 우선순위 재조정 (2025-11-11)

**변경 이유**: 종합 문서 검토 결과, 다음 발견사항에 따라 우선순위 재조정
- ✅ **JIT_COMPILER_RESEARCH.md**: "현재 바이트코드 VM이 충분히 빠름", "JIT는 6-12개월 작업"
- ✅ **LLVM_INTEGRATION.md**: "현재 단계에서는 도입 보류", "v1.5 이후 재고려"
- ✅ **ANALYSIS.md**: 에러 메시지 개선이 교육용 언어의 핵심 요구사항
- ✅ **현재 사용자 규모**: 소수 → 성능보다 **개발자 경험**이 우선

**주요 변경사항**:
| 기능 | 원래 우선순위 | 변경 후 | 이유 |
|-----|-------------|---------|------|
| F5.1 JIT | CRITICAL | **LOW** | 복잡도 높음, 현재 필요성 낮음, 연구 완료 |
| F5.2 디버거 | HIGH | **CRITICAL** | 개발 생산성 직접 영향 |
| F5.3 LSP | HIGH | **CRITICAL** | IDE 통합 필수 |
| F5.4 플레이그라운드 | MEDIUM | **HIGH** | 사용자 유입 핵심 |
| **F5.NEW 에러 메시지** | **누락** | **CRITICAL** | 교육용 언어 핵심 (ANALYSIS.md) |
| **F5.NEW 표준 라이브러리** | **누락** | **HIGH** | 실용성 직접 향상 |

### Phase 5 재조정된 목표
1. **개발자 도구 완성** (에러 메시지, 디버거, LSP) ⭐⭐⭐
2. **생태계 구축** (플레이그라운드, 표준 라이브러리 확장) ⭐⭐
3. **언어 기능 강화** (패턴 매칭) ⭐
4. **선택적 성능 최적화** (템플릿 JIT 프로토타입만) ⭐

---

## 🎯 Phase 5 작업 목록 (재조정됨)

### F5.NEW: 에러 메시지 개선 ⭐⭐⭐
- 상태: 📝 대기
- 브랜치: `feature/f5-new-error-messages`
- **우선순위**: CRITICAL
- **예상 기간**: 2주
- **목표**: 교육용 언어로서 직관적인 에러 메시지 제공

#### 현재 문제점 (ANALYSIS.md 발췌)
```
❌ 현재: "no prefix parse function for INTEGER found."
❌ 현재: "예상 토큰은 RPAREN입니다. 하지만 실제 토큰은 EOF입니다."
```

#### 목표 에러 메시지
```
📍 오류 위치: 3번째 줄, 5번째 문자

   2 | x = 10
   3 | 123변수 = 20
       ^^^
   4 | 출력(x)

❌ 구문 오류: 변수 이름은 숫자로 시작할 수 없습니다.

💡 도움말: 변수 이름은 한글, 영문, 밑줄(_)로 시작해야 합니다.
   예시: 변수123, _temp, 숫자
```

#### 작업 항목
- **기간**: 2주
- **작업**:
  - [ ] ErrorReporter 클래스 설계
  - [ ] 한글 에러 메시지 체계 구축
  - [ ] 에러 위치 표시 (줄, 컬럼)
  - [ ] 소스 코드 컨텍스트 표시 (전후 3줄)
  - [ ] 에러 유형별 해결 방법 힌트
  - [ ] 스택 트레이스 개선 (함수 호출 체인)
  - [ ] 컬러 출력 지원 (터미널)
- **에러 유형 커버리지**:
  - [ ] 구문 에러 (파싱 실패)
  - [ ] 타입 에러 (타입 불일치)
  - [ ] 런타임 에러 (실행 중 에러)
  - [ ] 이름 에러 (정의되지 않은 변수)
  - [ ] 인덱스 에러 (배열 범위 초과)
- **테스트**:
  - [ ] 구문 에러 메시지 테스트 (20개)
  - [ ] 런타임 에러 메시지 테스트 (15개)
  - [ ] 스택 트레이스 테스트 (10개)
- **문서**:
  - [ ] 에러 메시지 가이드 (사용자용)
  - [ ] ErrorReporter API 문서 (개발자용)
- **완료 조건**:
  - [ ] 모든 에러가 한글로 표시
  - [ ] 에러 위치 정확하게 표시
  - [ ] 도움말 힌트 제공
  - [ ] 테스트 통과

---

### F5.2: 디버거 구현 ⭐⭐⭐
- 상태: 📝 대기
- 브랜치: `feature/debugger`
- **우선순위**: CRITICAL (HIGH에서 상향)
- **예상 기간**: 4주
- **목표**: 대화형 디버깅 경험 제공

#### F5.2.1: 기본 디버거
- **기간**: 2주
- **작업**:
  - [ ] 브레이크포인트 설정/해제
  - [ ] 단계별 실행 (step, next, continue)
  - [ ] 콜 스택 추적
  - [ ] 변수 검사 (지역 변수, 전역 변수)
- **명령어**:
  ```
  (ksj-debug) break 파일.ksj:10    # 브레이크포인트 설정
  (ksj-debug) run                   # 실행
  (ksj-debug) step                  # 한 줄 실행
  (ksj-debug) print 변수명           # 변수 출력
  (ksj-debug) continue              # 계속 실행
  ```
- **테스트**:
  - [ ] 브레이크포인트 동작
  - [ ] 단계별 실행
  - [ ] 변수 검사

#### F5.2.2: 고급 디버거 기능
- **기간**: 2주
- **작업**:
  - [ ] 조건부 브레이크포인트
  - [ ] 와치포인트 (변수 변경 감지)
  - [ ] 표현식 평가
  - [ ] 소스 코드 표시
- **테스트**:
  - [ ] 조건부 브레이크포인트
  - [ ] 복잡한 표현식 평가

### F5.3: LSP (Language Server Protocol) ⭐⭐⭐
- 상태: ✅ **완료** (2025-11-12)
- 브랜치: `feature/lsp` → `main`
- **우선순위**: CRITICAL (HIGH에서 상향)
- **실제 기간**: 2주 (Day 5-14)
- **목표**: VS Code 등 에디터 통합 ✅

#### F5.3.1: 기본 LSP 서버 ✅
- **기간**: 2주
- **완료일**: 2025-11-12
- **PR**: #51
- **릴리스**: v0.3.0
- **작업**:
  - [x] LSP 서버 구현 (JSON-RPC)
    - JsonRpc.cpp (13 tests)
    - DocumentManager.cpp (18 tests)
    - LanguageServer.cpp (15 tests)
  - [x] 구문 강조 (Syntax Highlighting)
    - kingsejong.tmLanguage.json
  - [x] 자동 완성 (Auto-completion)
    - CompletionProvider.cpp (8 tests)
  - [x] 에러 진단 (Diagnostics)
    - DiagnosticsProvider.cpp (17 tests)
- **기능**:
  - ✅ 키워드 자동 완성 (34개)
  - ✅ 변수명 자동 완성
  - ✅ 실시간 에러 표시
- **테스트**:
  - [x] VS Code 확장 프로그램
  - [x] 자동 완성 동작
  - [x] 71개 LSP 테스트 추가 (729/729 통과)

#### F5.3.2: 고급 LSP 기능
- **기간**: 2주
- **작업**:
  - [ ] 정의로 이동 (Go to Definition)
  - [ ] 참조 찾기 (Find References)
  - [ ] 이름 변경 (Rename)
  - [ ] 호버 정보 (Hover Information)
- **테스트**:
  - [ ] 모든 LSP 기능 통합 테스트

### F5.4: 온라인 플레이그라운드 ⭐⭐
- 상태: 📝 대기
- 브랜치: `feature/web-playground`
- **우선순위**: HIGH (MEDIUM에서 상향)
- **예상 기간**: 3주
- **목표**: 브라우저에서 KingSejong 실행 (사용자 유입 핵심)

#### F5.4.1: WebAssembly 빌드
- **기간**: 1주
- **작업**:
  - [ ] Emscripten 빌드 설정
  - [ ] WASM 모듈 생성
  - [ ] JavaScript API 바인딩
- **테스트**:
  - [ ] 브라우저에서 실행
  - [ ] 기본 예제 동작

#### F5.4.2: 웹 인터페이스
- **기간**: 2주
- **작업**:
  - [ ] Monaco Editor 통합 (구문 강조)
  - [ ] 실행 버튼 및 출력 창
  - [ ] 예제 갤러리
  - [ ] 공유 기능 (URL 인코딩)
- **기능**:
  - 실시간 코드 실행
  - 에러 표시
  - 21개 예제 프로그램 제공
- **배포**:
  - [ ] GitHub Pages 배포
  - [ ] 도메인 연결 (선택)
- **완료 조건**:
  - [ ] 웹 인터페이스 완성
  - [ ] 모든 예제 동작
  - [ ] 배포 완료

---

### F5.NEW: 표준 라이브러리 확장 ⭐⭐
- 상태: 📝 대기
- 브랜치: `feature/stdlib-expansion`
- **우선순위**: HIGH
- **예상 기간**: 3주
- **목표**: 실용적인 언어로서 필수 라이브러리 제공

#### 현재 상태
- **현재**: stdlib/math.ksj, stdlib/string.ksj, stdlib/array.ksj (45개 함수)
- **목표**: 6개 모듈, 100개+ 함수

#### 작업 항목
- **기간**: 3주
- **작업**:
  - [ ] stdlib/io.ksj - 파일 I/O (15개 함수)
    - 파일_읽기(), 파일_쓰기(), 파일_추가(), 파일_존재()
    - 줄별_읽기(), 이진_읽기(), 이진_쓰기()
    - 디렉토리_생성(), 디렉토리_삭제(), 디렉토리_목록()
  - [ ] stdlib/http.ksj - HTTP 클라이언트 (10개 함수)
    - GET(), POST(), PUT(), DELETE()
    - 헤더_설정(), 쿼리_설정(), JSON_파싱()
  - [ ] stdlib/json.ksj - JSON 처리 (8개 함수)
    - JSON_파싱(), JSON_문자열화()
    - JSON_읽기(), JSON_쓰기()
  - [ ] stdlib/time.ksj - 날짜/시간 (15개 함수)
    - 현재_시간(), 현재_날짜(), 시간_포맷()
    - 시간_차이(), 날짜_더하기(), 날짜_빼기()
    - 타임스탬프(), 슬립()
  - [ ] stdlib/regex.ksj - 정규표현식 (7개 함수)
    - 정규식_매칭(), 정규식_찾기(), 정규식_치환()
  - [ ] 기존 라이브러리 개선 (10개 함수 추가)
- **테스트**:
  - [ ] 파일 I/O 테스트 (20개)
  - [ ] HTTP 테스트 (15개)
  - [ ] JSON 테스트 (10개)
  - [ ] 시간 테스트 (15개)
  - [ ] 정규식 테스트 (10개)
- **문서**:
  - [ ] 표준 라이브러리 레퍼런스 (전체)
  - [ ] 각 모듈 사용 예제
- **완료 조건**:
  - [ ] 100개+ 함수 달성
  - [ ] 모든 테스트 통과
  - [ ] 문서화 완료

---

### F5.5: 패턴 매칭 ⭐
- 상태: 📝 대기
- 브랜치: `feature/pattern-matching`
- **우선순위**: MEDIUM
- **예상 기간**: 3주
- **목표**: 강력한 조건 분기 제공

#### F5.5.1: 기본 패턴 매칭
- **기간**: 2주
- **작업**:
  - [ ] MatchExpression AST 노드
  - [ ] 패턴 매칭 Parser
  - [ ] 패턴 매칭 Evaluator
- **문법**:
  ```ksj
  결과 = 값에 대해 {
      1 -> "하나"
      2 -> "둘"
      _ -> "기타"
  }
  ```
- **테스트**:
  - [ ] 리터럴 매칭
  - [ ] 와일드카드 매칭
  - [ ] 가드 조건

#### F5.5.2: 고급 패턴 매칭
- **기간**: 1주
- **작업**:
  - [ ] 배열 분해 (Array Destructuring)
  - [ ] 타입 매칭
  - [ ] 범위 매칭
- **문법**:
  ```ksj
  배열 = [1, 2, 3]
  결과 = 배열에 대해 {
      [첫번째, 나머지...] -> 첫번째
      [] -> 0
  }
  ```

### F5.6: 비동기 프로그래밍 (선택) ⭐
- **우선순위**: LOW
- **예상 기간**: 4주
- **목표**: 시제 기반 비동기 구현

#### F5.6.1: Promise 구현
- **기간**: 2주
- **작업**:
  - [ ] Promise Value 타입
  - [ ] then/catch 메서드
  - [ ] async 함수
- **문법**:
  ```ksj
  함수 비동기_작업() {
      # 비동기 작업
  }

  결과 = 비동기_작업()
  결과를 기다린다
  ```

#### F5.6.2: 시제 기반 비동기 (연구)
- **기간**: 2주
- **작업**:
  - [ ] 시제 분석 연구
  - [ ] 문법 설계
  - [ ] 프로토타입 구현
- **완료 조건**:
  - [ ] 연구 보고서 작성
  - [ ] 프로토타입 동작
  - [ ] 문서화 완료

---

### F5.1: 템플릿 JIT 프로토타입 (선택) ⭐
- 상태: 📝 대기
- 브랜치: `feature/template-jit`
- **우선순위**: LOW (CRITICAL에서 하향, 연기)
- **예상 기간**: 1-2주 (프로토타입만)
- **조건**: F5.NEW, F5.2, F5.3, F5.4 완료 후
- **목표**: 기본 JIT 컴파일 검증 (Tier 1 프로토타입만)

#### 우선순위 하향 이유
- ✅ **JIT_COMPILER_RESEARCH.md 권장**: "현재 바이트코드 VM이 충분히 빠름"
- ✅ **LLVM_INTEGRATION.md 권장**: "현재 단계에서는 도입 보류", "v1.5 이후"
- ✅ **복잡도**: JIT는 6-12개월 작업 (프로토타입도 3주+)
- ✅ **ROI**: 현재 사용자 적음 → 개발자 경험이 우선
- ✅ **핫 패스 감지**: 이미 구현 완료 (F4.8)

#### 작업 항목 (Tier 1만, 축소)
- **기간**: 1-2주
- **작업** (프로토타입):
  - [ ] 간단한 바이트코드 → 네이티브 코드 매핑
  - [ ] 기본 레지스터 할당
  - [ ] 산술 연산만 지원 (ADD, SUB, MUL, DIV)
  - [ ] x86-64만 지원 (ARM64 제외)
- **테스트**:
  - [ ] 산술 연산 JIT 컴파일 (5개 테스트)
  - [ ] 성능 벤치마크 (2-5배 목표)
- **문서**:
  - [ ] JIT 프로토타입 보고서
- **완료 조건**:
  - [ ] 프로토타입 동작
  - [ ] 성능 측정 완료
  - [ ] 향후 계획 수립

**Note**: Tier 2 (고급 최적화), Tier 3 (LLVM 통합)은 v0.4.0 이후로 연기

---

## 📅 Phase 5 타임라인 (재조정됨)

### Month 1-2 (Week 1-8): 개발자 도구 🎯
- **Week 1-2**: F5.NEW 에러 메시지 개선 (CRITICAL)
- **Week 3-4**: F5.2.1 기본 디버거 (CRITICAL)
- **Week 5-6**: F5.2.2 고급 디버거 (HIGH)
- **Week 7-8**: F5.3.1 기본 LSP (CRITICAL)

### Month 3-4 (Week 9-16): 생태계 & 접근성 🚀
- **Week 9-10**: F5.3.2 고급 LSP (HIGH)
- **Week 11-13**: F5.4 온라인 플레이그라운드 (HIGH)
- **Week 14-16**: F5.NEW 표준 라이브러리 확장 (HIGH)

### Month 5 (Week 17-20): 언어 기능 강화 ✨
- **Week 17-18**: F5.5.1 기본 패턴 매칭 (MEDIUM)
- **Week 19-20**: F5.5.2 고급 패턴 매칭 (MEDIUM)

### Month 6 (Week 21-24): 선택적 최적화 & 릴리스 ⚡
- **Week 21-22**: F5.1 템플릿 JIT 프로토타입 (LOW, 선택)
- **Week 23**: F5.6 비동기 프로그래밍 연구 (LOW, 선택)
- **Week 24**: v0.3.0 릴리스 준비

---

## 🎯 마일스톤 (재조정됨)

### M5.1: 개발자 도구 완성 (Week 8)
- [ ] F5.NEW 에러 메시지 개선 완성
- [ ] F5.2 디버거 완성
- [ ] F5.3.1 기본 LSP 완성
- [ ] 개발 생산성 10배 향상 달성

### M5.2: 생태계 구축 (Week 16)
- [ ] F5.3.2 고급 LSP 완성
- [ ] F5.4 온라인 플레이그라운드 완성
- [ ] F5.NEW 표준 라이브러리 100개+ 함수 달성
- [ ] VS Code 확장 프로그램 출시
- [ ] 웹 배포 완료

### M5.3: 언어 기능 강화 (Week 20)
- [ ] F5.5 패턴 매칭 완성
- [ ] 모든 언어 기능 문서화
- [ ] 예제 프로그램 50개+

### M5.4: v0.3.0 릴리스 (Week 24)
- [ ] F5.1 JIT 프로토타입 (선택)
- [ ] F5.6 비동기 연구 (선택)
- [ ] 모든 기능 통합
- [ ] 문서화 완료
- [ ] 릴리스 노트 작성

---

## 📊 Phase 5 메트릭스 (재조정됨)

### 개발자 경험 목표 (최우선)
- **에러 메시지**: 100% 한글화, 위치 표시, 힌트 제공
- **디버거**: 모든 기본 기능 지원 (브레이크포인트, 단계별 실행, 변수 검사)
- **LSP**: VS Code 완벽 지원 (자동 완성, 진단, 정의 이동, 참조 찾기)
- **플레이그라운드**: 브라우저에서 즉시 실행, 21개 예제
- **표준 라이브러리**: 100개+ 함수 (io, http, json, time, regex)

### 성능 목표 (선택)
- **JIT 프로토타입** (선택): 2-5배 향상 (산술 연산만)
- **메모리 사용량**: < 100MB
- **시작 시간**: < 100ms

### 테스트 목표
- **테스트 커버리지**: ≥ 85%
- **에러 메시지 테스트**: 45개+
- **디버거 테스트**: 30개+
- **LSP 테스트**: 50개+
- **표준 라이브러리 테스트**: 70개+
- **전체 테스트**: 750개+ (567 + 183)

### 문서화 목표
- **에러 메시지 가이드**: 사용자용
- **디버거 가이드**: 사용자용
- **LSP 사용법**: VS Code 확장 문서
- **표준 라이브러리 레퍼런스**: 100개+ 함수
- **예제 프로그램**: 50개+ (21 → 50)

---

## 🔧 기술 스택 (재조정됨)

### 개발자 도구 (최우선)
- **에러 메시지**: 컬러 출력, 코드 컨텍스트, 힌트 시스템
- **디버거**: GDB 프로토콜 참고, REPL 통합
- **LSP**: Microsoft LSP 스펙 준수 (JSON-RPC)
- **에디터**: VS Code (우선), Neovim (향후)

### JIT 컴파일러 (선택, 연기)
- **Tier 1** (프로토타입만): 템플릿 JIT (x86-64, 산술 연산만)
- **Tier 2, 3**: v0.4.0 이후로 연기

### 플랫폼
- **WebAssembly**: Emscripten
- **웹 프레임워크**: React (Monaco Editor 통합)
- **배포**: GitHub Pages

---

## 🎓 학습 자료

### JIT 컴파일러
- [Crafting Interpreters - Bytecode Virtual Machine](https://craftinginterpreters.com/)
- [A Simple JIT for Lua](https://github.com/LuaJIT/LuaJIT)
- [V8 Design Elements](https://v8.dev/blog/elements-kinds)

### LSP
- [Language Server Protocol Specification](https://microsoft.github.io/language-server-protocol/)
- [LSP Example Servers](https://langserver.org/)

### WebAssembly
- [Emscripten Tutorial](https://emscripten.org/docs/getting_started/Tutorial.html)
- [WebAssembly MDN](https://developer.mozilla.org/en-US/docs/WebAssembly)

---

## ⚠️ 위험 요소 및 완화 전략 (재조정됨)

### 위험 1: LSP/디버거 구현 복잡도
- **위험도**: MEDIUM (이전 JIT에서 하향)
- **완화**: 기존 LSP 구현체 참고 (예: typescript-language-server)
- **대안**: 기본 기능만 먼저 구현 (고급 기능 연기)

### 위험 2: WebAssembly 플랫폼 제약
- **위험도**: MEDIUM
- **완화**: Emscripten 공식 문서 준수, 커뮤니티 활용
- **대안**: 기능 제한 (파일 I/O 등)

### 위험 3: 시간 부족
- **위험도**: LOW (우선순위 조정으로 완화됨)
- **완화**: 명확한 우선순위 (CRITICAL → HIGH → MEDIUM → LOW)
- **대안**: LOW 우선순위 기능 연기 (JIT, 비동기)

### 위험 4: 호환성 이슈
- **위험도**: LOW
- **완화**: 철저한 테스트, 회귀 테스트
- **대안**: 기능 플래그로 선택적 활성화

---

## 🚀 Phase 5 이후 (Phase 6+)

### Phase 6: 에코시스템 구축 (v0.4.0)
- **패키지 관리자**: npm 스타일 패키지 관리
- **커뮤니티 플랫폼**: 포럼, Discord
- **튜토리얼**: 인터랙티브 학습 사이트
- **예제 갤러리**: 100개+ 예제

### Phase 7: 고급 언어 기능 (v0.5.0)
- **정적 타입 시스템**: 선택적 정적 타입 (TypeScript 스타일)
- **제네릭**: 타입 매개변수
- **객체 지향**: 클래스, 상속
- **비동기 완성**: 시제 기반 비동기 구현

### Phase 8: 성능 최적화 (v1.0.0)
- **JIT Tier 2, 3**: 고급 최적화, LLVM 통합
- **증분 GC**: 일시 정지 시간 단축
- **병렬 처리**: 멀티스레딩 지원

---

## 📝 Phase 5 결론

### 핵심 결정사항
1. **개발자 경험 우선**: JIT보다 에러 메시지, 디버거, LSP가 더 중요
2. **실용성 우선**: 표준 라이브러리 확장 (45 → 100+ 함수)
3. **접근성 우선**: 온라인 플레이그라운드로 진입 장벽 제거
4. **성능은 연기**: JIT는 프로토타입만, Tier 2,3는 v0.4.0 이후

### 성공 기준
- ✅ 모든 에러 메시지 한글화 및 위치 표시
- ✅ 디버거 및 LSP 완성
- ✅ 온라인 플레이그라운드 출시
- ✅ 표준 라이브러리 100개+ 함수
- ✅ VS Code 확장 프로그램 출시
- ✅ 750개+ 테스트 통과
- ✅ v0.3.0 릴리스

### Phase 5가 언어에 미치는 영향
- **사용자 경험**: 10배 개선 (에러 메시지, 디버거, IDE 통합)
- **개발 생산성**: 10배 향상 (자동 완성, 실시간 진단, 디버깅)
- **접근성**: 브라우저에서 즉시 실행 (설치 불필요)
- **실용성**: 100개+ 라이브러리 함수 (실제 프로젝트 가능)

---

**Phase 5 시작일**: 2025-11-11
**예상 완료일**: 2025-05-11 (6개월)
**다음 릴리스**: v0.3.0
**우선순위 재조정일**: 2025-11-11 (문서 종합 검토 기반)

---

**Let's build a developer-friendly KingSejong! 🚀**

*"성능보다 경험이 먼저, 최적화는 언제든지 할 수 있다."*
