# =============================================================================
# KingSejong 예외 처리 예제
# =============================================================================
# 파일: examples/exception_handling.ksj
# 설명: 시도/오류/마지막/던지다 키워드를 사용한 예외 처리 예제

출력("===== KingSejong 예외 처리 시스템 =====")
출력()

# -----------------------------------------------------------------------------
# 예제 1: 기본 던지다 (Throw)
# -----------------------------------------------------------------------------
출력("📌 예제 1: 기본 던지다")

시도 {
    출력("  → 에러를 던집니다")
    던지다 "기본 에러 메시지"
} 오류 (e) {
    출력("  → 에러를 잡았습니다:", e)
}

출력()

# -----------------------------------------------------------------------------
# 예제 2: 시도-오류-마지막 (Try-Catch-Finally)
# -----------------------------------------------------------------------------
출력("📌 예제 2: 시도-오류-마지막")

정수 카운터 = 0

시도 {
    출력("  → Try 블록 실행")
    카운터 = 카운터 + 1
    던지다 "테스트 에러"
} 오류 (err) {
    출력("  → Catch 블록 실행:", err)
    카운터 = 카운터 + 10
} 마지막 {
    출력("  → Finally 블록 실행")
    카운터 = 카운터 + 100
}

출력("  최종 카운터 값:", 카운터)
출력()

# -----------------------------------------------------------------------------
# 예제 3: 중첩된 예외 처리
# -----------------------------------------------------------------------------
출력("📌 예제 3: 중첩된 예외 처리")

시도 {
    출력("  → 외부 try 블록")
    
    시도 {
        출력("    → 내부 try 블록")
        던지다 "내부 에러"
    } 오류 (inner_err) {
        출력("    → 내부 catch:", inner_err)
    } 마지막 {
        출력("    → 내부 finally")
    }
    
    출력("  → 외부 try 계속 실행")
} 마지막 {
    출력("  → 외부 finally")
}

출력()

# -----------------------------------------------------------------------------
# 예제 4: Try-Finally (Catch 없이)
# -----------------------------------------------------------------------------
출력("📌 예제 4: Try-Finally (Catch 없이)")

정수 값 = 0
시도 {
    출력("  → Try 블록")
    값 = 42
} 마지막 {
    출력("  → Finally 블록 (항상 실행됨)")
    출력("  값:", 값)
}

출력()

# -----------------------------------------------------------------------------
# 예제 5: 에러 전파
# -----------------------------------------------------------------------------
출력("📌 예제 5: 에러 전파 (미처리 에러)")

함수 위험한_작업() {
    시도 {
        던지다 "복구 불가능한 에러"
    } 마지막 {
        출력("  → 정리 작업 수행")
    }
}

시도 {
    위험한_작업()
} 오류 (e) {
    출력("  → 상위에서 에러 처리:", e)
}

출력()
출력("===== 예외 처리 예제 완료 =====")
